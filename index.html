<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Video to YouTube</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 400px;
            text-align: center;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .upload-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }

        .upload-btn:hover {
            background-color: #45a049;
        }

        .status-message {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }

        .error {
            color: red;
        }

        .success {
            color: green;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Upload Video to YouTube</h1>
        <button id="authButton" class="upload-btn">Authorize Google Account</button>
        <form id="uploadForm" enctype="multipart/form-data" style="display:none;">
            <div class="form-group">
                <label for="videoFile">Choose a video to upload</label>
                <input type="file" id="videoFile" name="videoFile" accept="video/*" required>
            </div>
            <div class="form-group">
                <button type="submit" id="uploadButton" class="upload-btn">Upload Video</button>
            </div>
        </form>
        <div id="statusMessage" class="status-message"></div>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        const CLIENT_ID = '331493991112-huo8b3uujba9e9ah4gl1s2uc0tseof0u.apps.googleusercontent.com'; // Your Google Client ID
        const API_KEY = 'AIzaSyBkPGe5Omx22wstG3ISozc1XkFjqqY5idM'; // Your Google API Key
        const SCOPES = 'https://www.googleapis.com/auth/youtube.upload';
        let GoogleAuth;

        // Load the Google API client
        function loadClient() {
            gapi.client.setApiKey(API_KEY);
            gapi.client.load('https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest').then(function () {
                console.log("YouTube API loaded");
            });
        }

        // Authenticate and load the API client
        function handleClientLoad() {
            gapi.load('client:auth2', function () {
                gapi.auth2.init({
                    client_id: CLIENT_ID
                }).then(function (auth2) {
                    GoogleAuth = auth2;
                    if (GoogleAuth.isSignedIn.get()) {
                        // If already signed in, show upload form
                        document.getElementById('uploadForm').style.display = 'block';
                    } else {
                        document.getElementById('authButton').style.display = 'block';
                    }
                });
            });
        }

        // Sign in to Google account
        function handleAuthClick(event) {
            GoogleAuth.signIn().then(function () {
                document.getElementById('authButton').style.display = 'none';
                document.getElementById('uploadForm').style.display = 'block';
            });
        }

        // Upload video to YouTube
        function uploadVideo(file) {
            const statusMessage = document.getElementById('statusMessage');
            const metadata = {
                snippet: {
                    title: 'Uploaded from JavaScript',
                    description: 'A video uploaded from JavaScript using YouTube API',
                    tags: ['YouTube API', 'video upload'],
                },
                status: {
                    privacyStatus: 'private',
                }
            };

            const formData = new FormData();
            formData.append('file', file);

            const request = gapi.client.youtube.videos.insert({
                part: 'snippet,status',
                resource: metadata,
                media: {
                    body: file
                }
            });

            request.execute(function (response) {
                if (response.error) {
                    statusMessage.innerHTML = "Error uploading video: " + response.error.message;
                    statusMessage.classList.add('error');
                } else {
                    statusMessage.innerHTML = "Video uploaded successfully!";
                    statusMessage.classList.add('success');
                }
            });
        }

        // Handle file selection and video upload
        document.getElementById('uploadForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const videoFile = document.getElementById('videoFile').files[0];
            if (videoFile) {
                uploadVideo(videoFile);
            }
        });

        // Initialize the Google API client
        window.onload = function () {
            handleClientLoad();
            document.getElementById('authButton').addEventListener('click', handleAuthClick);
        };
    </script>
</body>
</html>
